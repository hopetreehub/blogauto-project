<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BlogAuto Pro - AI ë¸”ë¡œê·¸ ì‘ì„± ë„êµ¬</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
            display: flex;
        }

        /* ì‚¬ì´ë“œë°” ë©”ë‰´ */
        .sidebar {
            width: 280px;
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 30px 0;
            display: flex;
            flex-direction: column;
        }

        .logo {
            text-align: center;
            margin-bottom: 40px;
            padding: 0 20px;
        }

        .logo h1 {
            font-size: 1.8em;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .logo p {
            font-size: 0.9em;
            opacity: 0.8;
        }

        .menu-item {
            padding: 15px 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
            display: flex;
            align-items: center;
        }

        .menu-item:hover {
            background: rgba(255,255,255,0.1);
            border-left-color: #3498db;
        }

        .menu-item.active {
            background: rgba(52, 152, 219, 0.2);
            border-left-color: #3498db;
        }

        .menu-item i {
            margin-right: 10px;
            width: 20px;
        }

        .settings-panel {
            margin-top: auto;
            padding: 20px;
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        /* ë©”ì¸ ì½˜í…ì¸  */
        .main-content {
            flex: 1;
            padding: 40px;
            overflow-y: auto;
            max-height: 100vh;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        .page-header {
            margin-bottom: 30px;
        }

        .page-title {
            font-size: 2.2em;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .page-subtitle {
            font-size: 1.1em;
            color: #7f8c8d;
        }

        /* ì„¤ì • íŒ¨ë„ ìŠ¤íƒ€ì¼ */
        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .setting-card {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 25px;
            border: 2px solid #e9ecef;
            transition: all 0.3s ease;
        }

        .setting-card:hover {
            border-color: #3498db;
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.1);
        }

        .setting-title {
            font-size: 1.2em;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .setting-title i {
            margin-right: 10px;
            color: #3498db;
        }

        .setting-description {
            color: #6c757d;
            margin-bottom: 15px;
            font-size: 0.95em;
        }

        .setting-input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            margin-bottom: 10px;
        }

        .setting-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .setting-toggle {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .toggle-switch {
            position: relative;
            width: 50px;
            height: 25px;
            background: #ccc;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .toggle-switch.active {
            background: #3498db;
        }

        .toggle-switch::after {
            content: '';
            position: absolute;
            width: 21px;
            height: 21px;
            background: white;
            border-radius: 50%;
            top: 2px;
            left: 2px;
            transition: all 0.3s ease;
        }

        .toggle-switch.active::after {
            left: 27px;
        }

        /* ê¸°ì¡´ ìŠ¤íƒ€ì¼ë“¤ */
        .step {
            margin-bottom: 40px;
            padding: 30px;
            border: 2px solid #f0f0f0;
            border-radius: 15px;
            background: #fafafa;
            transition: all 0.3s ease;
        }

        .step.active {
            border-color: #3498db;
            background: #f8fbff;
            box-shadow: 0 10px 30px rgba(52, 152, 219, 0.1);
        }

        .step-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .step-number {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2em;
            margin-right: 15px;
        }

        .step-title {
            font-size: 1.5em;
            font-weight: 600;
            color: #2c3e50;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
            font-size: 1.1em;
        }

        .input-group input, .input-group select, .input-group textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1.1em;
            transition: all 0.3s ease;
        }

        .input-group textarea {
            min-height: 120px;
            resize: vertical;
        }

        .input-group input:focus, .input-group select:focus, .input-group textarea:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-right: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(52, 152, 219, 0.3);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #95a5a6 0%, #7f8c8d 100%);
        }

        .loading {
            display: none;
            align-items: center;
            color: #3498db;
            font-weight: 600;
            margin-top: 15px;
        }

        .loading.show {
            display: flex;
        }

        .spinner {
            width: 20px;
            height: 20px;
            border: 2px solid #e0e0e0;
            border-top: 2px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .results {
            margin-top: 20px;
            padding: 20px;
            background: white;
            border-radius: 10px;
            border: 1px solid #e0e0e0;
        }

        .keyword-analysis {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .metric {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .metric-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #3498db;
        }

        .metric-label {
            font-size: 0.9em;
            color: #666;
            margin-top: 5px;
        }

        .title-option {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .title-option:hover {
            border-color: #3498db;
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.1);
        }

        .title-option.selected {
            border-color: #3498db;
            background: #f8fbff;
        }

        .title-text {
            font-size: 1.2em;
            font-weight: 600;
            margin-bottom: 10px;
            color: #2c3e50;
        }

        .title-score {
            color: #3498db;
            font-weight: bold;
        }

        .content-preview {
            background: #f8f9fa;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            max-height: 400px;
            overflow-y: auto;
        }

        .content-stats {
            display: flex;
            gap: 20px;
            margin-bottom: 15px;
            font-size: 0.9em;
            color: #666;
            flex-wrap: wrap;
        }

        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            border: 1px solid #c3e6cb;
        }

        .error-message {
            background: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            border: 1px solid #f5c6cb;
        }

        .related-keywords {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }

        .keyword-tag {
            background: #e3f2fd;
            color: #1976d2;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9em;
        }

        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-online { background: #27ae60; }
        .status-offline { background: #e74c3c; }
        .status-warning { background: #f39c12; }

        /* ì§€ì¹¨ ê´€ë¦¬ ìŠ¤íƒ€ì¼ */
        .guidelines-tabs {
            display: flex;
            gap: 10px;
            border-bottom: 2px solid #eee;
            padding-bottom: 0;
        }

        .tab-btn {
            padding: 12px 24px;
            border: none;
            background: #f8f9fa;
            color: #666;
            cursor: pointer;
            border-radius: 8px 8px 0 0;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .tab-btn.active {
            background: #007bff;
            color: white;
        }

        .tab-btn:hover:not(.active) {
            background: #e9ecef;
        }

        .guideline-content {
            animation: fadeIn 0.3s ease;
        }

        .guideline-card {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border: 1px solid #e9ecef;
        }

        .guideline-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f1f3f4;
        }

        .guideline-header h3 {
            margin: 0;
            color: #2c3e50;
            font-size: 1.4em;
        }

        .guideline-actions {
            display: flex;
            gap: 10px;
        }

        .btn-small {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .btn-small:first-child {
            background: #dc3545;
            color: white;
        }

        .btn-small:first-child:hover {
            background: #c82333;
        }

        .btn-small:last-child {
            background: #28a745;
            color: white;
        }

        .btn-small:last-child:hover {
            background: #218838;
        }

        .file-upload-section {
            margin-bottom: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 2px dashed #dee2e6;
            text-align: center;
        }

        .file-upload-btn {
            display: inline-block;
            padding: 12px 24px;
            background: #007bff;
            color: white;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .file-upload-btn:hover {
            background: #0056b3;
            transform: translateY(-1px);
        }

        .file-name {
            display: block;
            margin-top: 10px;
            font-size: 0.9em;
            color: #666;
        }

        .guideline-textarea {
            width: 100%;
            min-height: 400px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-size: 0.95em;
            line-height: 1.6;
            resize: vertical;
            background: #fefefe;
            transition: border-color 0.3s ease;
        }

        .guideline-textarea:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 3px rgba(0,123,255,0.1);
        }

        .guideline-textarea::placeholder {
            color: #999;
            font-style: italic;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 1024px) {
            .container {
                flex-direction: column;
                margin: 10px;
            }
            
            .sidebar {
                width: 100%;
                order: 2;
            }
            
            .main-content {
                padding: 20px;
                order: 1;
            }
            
            .settings-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ì‚¬ì´ë“œë°” ë©”ë‰´ -->
        <div class="sidebar">
            <div class="logo">
                <h1>ğŸš€ BlogAuto Pro</h1>
                <p>AI ë¸”ë¡œê·¸ ìë™í™” í”Œë«í¼</p>
            </div>
            
            <div class="menu-item active" onclick="showPage('writer')">
                <i>âœï¸</i> ë¸”ë¡œê·¸ ì‘ì„±
            </div>
            
            <div class="menu-item" onclick="showPage('settings')">
                <i>âš™ï¸</i> ì‹œìŠ¤í…œ ì„¤ì •
            </div>
            
            <div class="menu-item" onclick="showPage('guidelines')">
                <i>ğŸ“‹</i> ê¸€ì“°ê¸° ì§€ì¹¨
            </div>
            
            <div class="menu-item" onclick="showPage('templates')">
                <i>ğŸ“„</i> í…œí”Œë¦¿ ê´€ë¦¬
            </div>
            
            <div class="menu-item" onclick="showPage('analytics')">
                <i>ğŸ“Š</i> ë¶„ì„ & í†µê³„
            </div>
            
            <div class="menu-item" onclick="showPage('help')">
                <i>â“</i> ë„ì›€ë§
            </div>
            
            <div class="settings-panel">
                <div style="font-size: 0.9em; opacity: 0.8; margin-bottom: 10px;">
                    <span class="status-indicator status-online"></span> API ì„œë²„ ì—°ê²°ë¨
                </div>
                <div style="font-size: 0.8em; opacity: 0.6;">
                    Version 1.0.0
                </div>
            </div>
        </div>

        <!-- ë©”ì¸ ì½˜í…ì¸  -->
        <div class="main-content">
            <!-- ë¸”ë¡œê·¸ ì‘ì„± í˜ì´ì§€ -->
            <div id="writer-page" class="page active">
                <div class="page-header">
                    <h1 class="page-title">AI ë¸”ë¡œê·¸ ì‘ì„±</h1>
                    <p class="page-subtitle">í‚¤ì›Œë“œë¶€í„° ì™„ì„±ëœ ê¸€ê¹Œì§€ ìë™ìœ¼ë¡œ ìƒì„±í•˜ì„¸ìš”</p>
                </div>

                <!-- Step 1: í‚¤ì›Œë“œ ë¶„ì„ -->
                <div class="step active" id="step1">
                    <div class="step-header">
                        <div class="step-number">1</div>
                        <div class="step-title">í‚¤ì›Œë“œ ë¶„ì„</div>
                    </div>
                    
                    <div class="input-group">
                        <label for="keyword">ì£¼ì œ í‚¤ì›Œë“œ</label>
                        <input type="text" id="keyword" placeholder="ì˜ˆ: ê±´ê°•í•œ ì‹ë‹¨, ë©´ì—­ë ¥ ë†’ì´ê¸°, íˆ¬ì ë°©ë²•" />
                    </div>
                    
                    <div class="input-group">
                        <label for="country">íƒ€ê²Ÿ êµ­ê°€</label>
                        <select id="country">
                            <option value="KR">í•œêµ­</option>
                            <option value="US">ë¯¸êµ­</option>
                            <option value="JP">ì¼ë³¸</option>
                        </select>
                    </div>
                    
                    <button class="btn" onclick="analyzeKeyword()">í‚¤ì›Œë“œ ë¶„ì„í•˜ê¸°</button>
                    <div class="loading" id="loading1">
                        <div class="spinner"></div>
                        í‚¤ì›Œë“œë¥¼ ë¶„ì„í•˜ê³  ìˆìŠµë‹ˆë‹¤...
                    </div>
                    
                    <div id="keyword-results" class="results" style="display: none;"></div>
                </div>

                <!-- Step 2: ì œëª© ìƒì„± -->
                <div class="step" id="step2">
                    <div class="step-header">
                        <div class="step-number">2</div>
                        <div class="step-title">SEO ìµœì í™” ì œëª© ìƒì„±</div>
                    </div>
                    
                    <div class="input-group">
                        <label for="title-count">ìƒì„±í•  ì œëª© ê°œìˆ˜</label>
                        <select id="title-count">
                            <option value="3">3ê°œ</option>
                            <option value="5" selected>5ê°œ</option>
                            <option value="7">7ê°œ</option>
                            <option value="10">10ê°œ</option>
                        </select>
                    </div>
                    
                    <div class="input-group">
                        <label for="tone">ê¸€ì˜ í†¤</label>
                        <select id="tone">
                            <option value="professional">ì „ë¬¸ì </option>
                            <option value="friendly">ì¹œê·¼í•œ</option>
                            <option value="formal">ê³µì‹ì </option>
                            <option value="casual">ìºì£¼ì–¼</option>
                        </select>
                    </div>
                    
                    <button class="btn" onclick="generateTitles()" disabled id="generate-titles-btn">ì œëª© ìƒì„±í•˜ê¸°</button>
                    <div class="loading" id="loading2">
                        <div class="spinner"></div>
                        SEO ìµœì í™” ì œëª©ì„ ìƒì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤...
                    </div>
                    
                    <div id="title-results" class="results" style="display: none;"></div>
                </div>

                <!-- Step 3: ì½˜í…ì¸  ìƒì„± -->
                <div class="step" id="step3">
                    <div class="step-header">
                        <div class="step-number">3</div>
                        <div class="step-title">ê³ í’ˆì§ˆ ì½˜í…ì¸  ìƒì„±</div>
                    </div>
                    
                    <div class="input-group">
                        <label for="content-length">ê¸€ ê¸¸ì´</label>
                        <select id="content-length">
                            <option value="short">ì§§ìŒ (800-1200ì)</option>
                            <option value="medium" selected>ë³´í†µ (1500-2500ì)</option>
                            <option value="long">ê¸º (2500-4000ì)</option>
                        </select>
                    </div>
                    
                    <button class="btn" onclick="generateContent()" disabled id="generate-content-btn">ì½˜í…ì¸  ìƒì„±í•˜ê¸°</button>
                    <div class="loading" id="loading3">
                        <div class="spinner"></div>
                        ê³ í’ˆì§ˆ ë¸”ë¡œê·¸ ì½˜í…ì¸ ë¥¼ ìƒì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤...
                    </div>
                    
                    <div id="content-results" class="results" style="display: none;"></div>
                </div>

                <!-- Step 4: WordPress ë°œí–‰ -->
                <div class="step" id="step4">
                    <div class="step-header">
                        <div class="step-number">4</div>
                        <div class="step-title">WordPress ìë™ ë°œí–‰</div>
                    </div>
                    
                    <div class="input-group">
                        <label for="wp-site">WordPress ì‚¬ì´íŠ¸ URL</label>
                        <input type="text" id="wp-site" value="https://innerspell.com" placeholder="https://example.com" />
                    </div>
                    
                    <div class="input-group">
                        <label for="wp-username">ì‚¬ìš©ìëª…</label>
                        <input type="text" id="wp-username" value="banana" placeholder="WordPress ì‚¬ìš©ìëª…" />
                    </div>
                    
                    <div class="input-group">
                        <label for="wp-password">Application Password</label>
                        <input type="password" id="wp-password" placeholder="WordPress Application Password" />
                    </div>
                    
                    <div class="input-group">
                        <label for="wp-category">ì¹´í…Œê³ ë¦¬</label>
                        <input type="text" id="wp-category" value="ê±´ê°•í•œ ì‚¶" placeholder="ê¸€ ì¹´í…Œê³ ë¦¬" />
                    </div>
                    
                    <button class="btn" onclick="publishWordPress()" disabled id="publish-btn">WordPressì— ë°œí–‰í•˜ê¸°</button>
                    <div class="loading" id="loading4">
                        <div class="spinner"></div>
                        WordPressì— ë°œí–‰í•˜ê³  ìˆìŠµë‹ˆë‹¤...
                    </div>
                    
                    <div id="publish-results" class="results" style="display: none;"></div>
                </div>
            </div>

            <!-- ì‹œìŠ¤í…œ ì„¤ì • í˜ì´ì§€ -->
            <div id="settings-page" class="page">
                <div class="page-header">
                    <h1 class="page-title">ì‹œìŠ¤í…œ ì„¤ì •</h1>
                    <p class="page-subtitle">BlogAutoì˜ ê¸°ë³¸ ì„¤ì •ì„ ê´€ë¦¬í•˜ì„¸ìš”</p>
                </div>

                <div class="settings-grid">
                    <div class="setting-card">
                        <div class="setting-title">
                            <i>ğŸ”‘</i> API í‚¤ ê´€ë¦¬
                        </div>
                        <div class="setting-description">
                            AI ì„œë¹„ìŠ¤ ì—°ë™ì„ ìœ„í•œ API í‚¤ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.
                        </div>
                        <input type="password" class="setting-input" id="openai-key" placeholder="OpenAI API Key" />
                        <input type="password" class="setting-input" id="gemini-key" placeholder="Google Gemini API Key" />
                        <input type="password" class="setting-input" id="grok-key" placeholder="xAI Grok API Key" />
                        <button class="btn" onclick="saveAPIKeys()">ì €ì¥</button>
                    </div>

                    <div class="setting-card">
                        <div class="setting-title">
                            <i>ğŸŒ</i> ì–¸ì–´ & ì§€ì—­ ì„¤ì •
                        </div>
                        <div class="setting-description">
                            ê¸°ë³¸ ì–¸ì–´ì™€ íƒ€ê²Ÿ ì§€ì—­ì„ ì„¤ì •í•©ë‹ˆë‹¤.
                        </div>
                        <select class="setting-input" id="default-language">
                            <option value="ko">í•œêµ­ì–´</option>
                            <option value="en">English</option>
                            <option value="ja">æ—¥æœ¬èª</option>
                        </select>
                        <select class="setting-input" id="default-country">
                            <option value="KR">ëŒ€í•œë¯¼êµ­</option>
                            <option value="US">ë¯¸êµ­</option>
                            <option value="JP">ì¼ë³¸</option>
                        </select>
                    </div>

                    <div class="setting-card">
                        <div class="setting-title">
                            <i>âš¡</i> ì„±ëŠ¥ ì„¤ì •
                        </div>
                        <div class="setting-description">
                            ì‹œìŠ¤í…œ ì„±ëŠ¥ê³¼ ê´€ë ¨ëœ ì„¤ì •ì„ ì¡°ì •í•©ë‹ˆë‹¤.
                        </div>
                        <div class="setting-toggle">
                            <span>ìºì‹± í™œì„±í™”</span>
                            <div class="toggle-switch active" onclick="toggleSetting(this)"></div>
                        </div>
                        <div class="setting-toggle">
                            <span>ì••ì¶• í™œì„±í™”</span>
                            <div class="toggle-switch active" onclick="toggleSetting(this)"></div>
                        </div>
                        <div class="setting-toggle">
                            <span>ë°°ì¹˜ ì²˜ë¦¬</span>
                            <div class="toggle-switch" onclick="toggleSetting(this)"></div>
                        </div>
                    </div>

                    <div class="setting-card">
                        <div class="setting-title">
                            <i>ğŸ”’</i> ë³´ì•ˆ ì„¤ì •
                        </div>
                        <div class="setting-description">
                            ë³´ì•ˆ ê´€ë ¨ ì„¤ì •ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.
                        </div>
                        <div class="setting-toggle">
                            <span>Rate Limiting</span>
                            <div class="toggle-switch active" onclick="toggleSetting(this)"></div>
                        </div>
                        <div class="setting-toggle">
                            <span>IP ë¸”ë¡í‚¹</span>
                            <div class="toggle-switch active" onclick="toggleSetting(this)"></div>
                        </div>
                        <input type="number" class="setting-input" placeholder="ìµœëŒ€ ìš”ì²­ ìˆ˜ (ë¶„ë‹¹)" value="60" />
                    </div>
                </div>
            </div>

            <!-- ê¸€ì“°ê¸° ì§€ì¹¨ í˜ì´ì§€ -->
            <div id="guidelines-page" class="page">
                <div class="page-header">
                    <h1 class="page-title">ê¸€ì“°ê¸° ì§€ì¹¨ ê´€ë¦¬</h1>
                    <p class="page-subtitle">ì œëª© ìƒì„±ê³¼ ë¸”ë¡œê·¸ ì‘ì„±ì— ì‚¬ìš©ë  ì§€ì¹¨ì„ ì§ì ‘ ê´€ë¦¬í•˜ì„¸ìš”</p>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 10px; margin-top: 15px; border-left: 4px solid #007bff;">
                        <strong>ğŸ“ ì§€ì¹¨ ì ìš©:</strong> ëª¨ë“  ì½˜í…ì¸ ëŠ” ì•„ë˜ ì„¤ì •ëœ ì§€ì¹¨ì— ë”°ë¼ ìƒì„±ë©ë‹ˆë‹¤
                    </div>
                </div>

                <!-- ì§€ì¹¨ ê´€ë¦¬ íƒ­ -->
                <div class="guidelines-tabs" style="margin-bottom: 30px;">
                    <button class="tab-btn active" onclick="switchGuidelineTab('title')">ì œëª© ìƒì„± ì§€ì¹¨</button>
                    <button class="tab-btn" onclick="switchGuidelineTab('content')">ë¸”ë¡œê·¸ ì‘ì„± ì§€ì¹¨</button>
                </div>

                <!-- ì œëª© ìƒì„± ì§€ì¹¨ -->
                <div id="title-guidelines" class="guideline-content">
                    <div class="guideline-card">
                        <div class="guideline-header">
                            <h3>ì œëª© ìƒì„± ì§€ì¹¨</h3>
                            <div class="guideline-actions">
                                <button class="btn-small" onclick="clearTitleGuidelines()">ëª¨ë‘ ì§€ìš°ê¸°</button>
                                <button class="btn-small" onclick="saveTitleGuidelines()">ì €ì¥</button>
                            </div>
                        </div>
                        
                        <div class="file-upload-section">
                            <label for="title-file-upload" class="file-upload-btn">
                                ğŸ“ ì§€ì¹¨ íŒŒì¼ ì—…ë¡œë“œ (.txt, .md, .json)
                            </label>
                            <input type="file" id="title-file-upload" accept=".txt,.md,.json" onchange="loadTitleGuidelinesFromFile(this)" style="display: none;">
                            <span id="title-file-name" class="file-name"></span>
                        </div>
                        
                        <textarea id="title-guidelines-text" class="guideline-textarea" rows="15" placeholder="ì œëª© ìƒì„±ì— ì‚¬ìš©í•  ì§€ì¹¨ì„ ì…ë ¥í•˜ì„¸ìš”...

ì˜ˆì‹œ:
- í‚¤ì›Œë“œë¥¼ ì œëª© ì•ìª½ì— ë°°ì¹˜
- 60ì ì´ë‚´ë¡œ ì‘ì„±
- ìˆ«ìë‚˜ ì•¡ì…˜ ì›Œë“œ í¬í•¨
- í´ë¦­ì„ ìœ ë„í•˜ëŠ” ê°ì •ì  ìš”ì†Œ ì¶”ê°€
- SEOì— ìµœì í™”ëœ êµ¬ì¡°
- ìì—°ìŠ¤ëŸ¬ìš´ í•œêµ­ì–´ ë¬¸ë²• ì¤€ìˆ˜"></textarea>
                    </div>
                </div>

                <!-- ë¸”ë¡œê·¸ ì‘ì„± ì§€ì¹¨ -->
                <div id="content-guidelines" class="guideline-content" style="display: none;">
                    <div class="guideline-card">
                        <div class="guideline-header">
                            <h3>ë¸”ë¡œê·¸ ì‘ì„± ì§€ì¹¨</h3>
                            <div class="guideline-actions">
                                <button class="btn-small" onclick="clearContentGuidelines()">ëª¨ë‘ ì§€ìš°ê¸°</button>
                                <button class="btn-small" onclick="saveContentGuidelines()">ì €ì¥</button>
                            </div>
                        </div>
                        
                        <div class="file-upload-section">
                            <label for="content-file-upload" class="file-upload-btn">
                                ğŸ“ ì§€ì¹¨ íŒŒì¼ ì—…ë¡œë“œ (.txt, .md, .json)
                            </label>
                            <input type="file" id="content-file-upload" accept=".txt,.md,.json" onchange="loadContentGuidelinesFromFile(this)" style="display: none;">
                            <span id="content-file-name" class="file-name"></span>
                        </div>
                        
                        <textarea id="content-guidelines-text" class="guideline-textarea" rows="15" placeholder="ë¸”ë¡œê·¸ ì½˜í…ì¸  ì‘ì„±ì— ì‚¬ìš©í•  ì§€ì¹¨ì„ ì…ë ¥í•˜ì„¸ìš”...

ì˜ˆì‹œ:
- ì „ë¬¸ì ì´ë©´ì„œë„ ì¹œê·¼í•œ í†¤ ì‚¬ìš©
- 1500-3000ì ì ì • ê¸¸ì´
- H2, H3 í—¤ë”©ì„ í™œìš©í•œ êµ¬ì¡°í™”
- ë¶ˆë¦¿ í¬ì¸íŠ¸ë¡œ í•µì‹¬ ì •ë³´ ì •ë¦¬
- í‚¤ì›Œë“œ ë°€ë„ 1.5-2.5% ìœ ì§€
- ì‹¤ìš©ì ì´ê³  ë°”ë¡œ ì ìš© ê°€ëŠ¥í•œ ì •ë³´ ì œê³µ
- ìì—°ìŠ¤ëŸ¬ìš´ í•œêµ­ì–´ í‘œí˜„
- ì´ëª¨í‹°ì½˜ ì‚¬ìš© ê¸ˆì§€"></textarea>
                    </div>
                </div>
            </div>

            <!-- ê¸°íƒ€ í˜ì´ì§€ë“¤ (ê°„ë‹¨íˆ êµ¬í˜„) -->
            <div id="templates-page" class="page">
                <div class="page-header">
                    <h1 class="page-title">í…œí”Œë¦¿ ê´€ë¦¬</h1>
                    <p class="page-subtitle">ìì£¼ ì‚¬ìš©í•˜ëŠ” ê¸€ í…œí”Œë¦¿ì„ ê´€ë¦¬í•˜ì„¸ìš”</p>
                </div>
                <div style="text-align: center; padding: 40px; color: #7f8c8d;">
                    <i style="font-size: 4em; display: block; margin-bottom: 20px;">ğŸ“„</i>
                    <h3>í…œí”Œë¦¿ ê¸°ëŠ¥ ì¤€ë¹„ ì¤‘</h3>
                    <p>ê³§ ë‹¤ì–‘í•œ ê¸€ í…œí”Œë¦¿ì„ ì œê³µí•  ì˜ˆì •ì…ë‹ˆë‹¤.</p>
                </div>
            </div>

            <div id="analytics-page" class="page">
                <div class="page-header">
                    <h1 class="page-title">ë¶„ì„ & í†µê³„</h1>
                    <p class="page-subtitle">ê¸€ì“°ê¸° ì„±ê³¼ì™€ íŠ¸ë Œë“œë¥¼ ë¶„ì„í•˜ì„¸ìš”</p>
                </div>
                <div style="text-align: center; padding: 40px; color: #7f8c8d;">
                    <i style="font-size: 4em; display: block; margin-bottom: 20px;">ğŸ“Š</i>
                    <h3>ë¶„ì„ ê¸°ëŠ¥ ì¤€ë¹„ ì¤‘</h3>
                    <p>í‚¤ì›Œë“œ ì„±ê³¼, ì¡°íšŒìˆ˜, íŠ¸ë Œë“œ ë¶„ì„ ê¸°ëŠ¥ì„ ê°œë°œ ì¤‘ì…ë‹ˆë‹¤.</p>
                </div>
            </div>

            <div id="help-page" class="page">
                <div class="page-header">
                    <h1 class="page-title">ë„ì›€ë§</h1>
                    <p class="page-subtitle">BlogAuto ì‚¬ìš©ë²•ê³¼ FAQ</p>
                </div>
                <div style="padding: 20px;">
                    <h3>ğŸš€ ì‹œì‘í•˜ê¸°</h3>
                    <p>1. í‚¤ì›Œë“œë¥¼ ì…ë ¥í•˜ì—¬ ë¶„ì„ì„ ì‹œì‘í•˜ì„¸ìš”</p>
                    <p>2. ìƒì„±ëœ ì œëª© ì¤‘ ë§ˆìŒì— ë“œëŠ” ê²ƒì„ ì„ íƒí•˜ì„¸ìš”</p>
                    <p>3. ê¸€ ê¸¸ì´ë¥¼ ì„ íƒí•˜ê³  ì½˜í…ì¸ ë¥¼ ìƒì„±í•˜ì„¸ìš”</p>
                    <p>4. WordPressì— ìë™ìœ¼ë¡œ ë°œí–‰í•˜ì„¸ìš”</p>
                    
                    <h3 style="margin-top: 30px;">âš™ï¸ ì„¤ì • ê°€ì´ë“œ</h3>
                    <p>â€¢ API í‚¤ëŠ” ê° ì„œë¹„ìŠ¤ì˜ ê³µì‹ ì›¹ì‚¬ì´íŠ¸ì—ì„œ ë°œê¸‰ë°›ìœ¼ì„¸ìš”</p>
                    <p>â€¢ ê¸€ì“°ê¸° ì§€ì¹¨ì„ ì„¤ì •í•˜ì—¬ ë¸Œëœë“œì— ë§ëŠ” ì½˜í…ì¸ ë¥¼ ìƒì„±í•˜ì„¸ìš”</p>
                    <p>â€¢ ì„±ëŠ¥ ì„¤ì •ì„ ì¡°ì •í•˜ì—¬ ìµœì ì˜ ì†ë„ë¥¼ ì–»ìœ¼ì„¸ìš”</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        const API_BASE = 'http://localhost:8000';
        let currentKeyword = '';
        let selectedTitle = '';
        let generatedContent = '';
        let settings = {};

        // í˜ì´ì§€ ì „í™˜
        function showPage(pageId) {
            // ëª¨ë“  í˜ì´ì§€ ìˆ¨ê¸°ê¸°
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // ëª¨ë“  ë©”ë‰´ ë¹„í™œì„±í™”
            document.querySelectorAll('.menu-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // ì„ íƒëœ í˜ì´ì§€ í‘œì‹œ
            document.getElementById(pageId + '-page').classList.add('active');
            
            // ì„ íƒëœ ë©”ë‰´ í™œì„±í™”
            event.target.closest('.menu-item').classList.add('active');
        }

        // í† ê¸€ ìŠ¤ìœ„ì¹˜
        function toggleSetting(element) {
            element.classList.toggle('active');
        }

        // ì„¤ì • ì €ì¥ í•¨ìˆ˜ë“¤
        function saveAPIKeys() {
            const openaiKey = document.getElementById('openai-key').value;
            const geminiKey = document.getElementById('gemini-key').value;
            const grokKey = document.getElementById('grok-key').value;
            
            // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥ (ì‹¤ì œë¡œëŠ” ì•”í˜¸í™”ëœ ë°±ì—”ë“œì— ì €ì¥í•´ì•¼ í•¨)
            if (openaiKey) localStorage.setItem('openai_key', openaiKey);
            if (geminiKey) localStorage.setItem('gemini_key', geminiKey);
            if (grokKey) localStorage.setItem('grok_key', grokKey);
            
            showSuccess('API í‚¤ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
        }

        // ì§€ì¹¨ ê´€ë¦¬ í•¨ìˆ˜ë“¤
        function switchGuidelineTab(type) {
            // íƒ­ ë²„íŠ¼ í™œì„±í™”
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // ì½˜í…ì¸  í‘œì‹œ/ìˆ¨ê¹€
            document.getElementById('title-guidelines').style.display = type === 'title' ? 'block' : 'none';
            document.getElementById('content-guidelines').style.display = type === 'content' ? 'block' : 'none';
        }

        function clearTitleGuidelines() {
            if (confirm('ì œëª© ìƒì„± ì§€ì¹¨ì„ ëª¨ë‘ ì§€ìš°ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                document.getElementById('title-guidelines-text').value = '';
                document.getElementById('title-file-name').textContent = '';
                showSuccess('ì œëª© ì§€ì¹¨ì´ ì§€ì›Œì¡ŒìŠµë‹ˆë‹¤.');
            }
        }

        function clearContentGuidelines() {
            if (confirm('ë¸”ë¡œê·¸ ì‘ì„± ì§€ì¹¨ì„ ëª¨ë‘ ì§€ìš°ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                document.getElementById('content-guidelines-text').value = '';
                document.getElementById('content-file-name').textContent = '';
                showSuccess('ë¸”ë¡œê·¸ ì§€ì¹¨ì´ ì§€ì›Œì¡ŒìŠµë‹ˆë‹¤.');
            }
        }

        function saveTitleGuidelines() {
            const guidelines = document.getElementById('title-guidelines-text').value;
            if (guidelines.trim()) {
                localStorage.setItem('title_guidelines', guidelines);
                showSuccess('ì œëª© ìƒì„± ì§€ì¹¨ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
            } else {
                showError('ì§€ì¹¨ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
            }
        }

        function saveContentGuidelines() {
            const guidelines = document.getElementById('content-guidelines-text').value;
            if (guidelines.trim()) {
                localStorage.setItem('content_guidelines', guidelines);
                showSuccess('ë¸”ë¡œê·¸ ì‘ì„± ì§€ì¹¨ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
            } else {
                showError('ì§€ì¹¨ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
            }
        }

        function loadTitleGuidelinesFromFile(input) {
            const file = input.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    let content = e.target.result;
                    
                    // JSON íŒŒì¼ì¸ ê²½ìš° íŒŒì‹±
                    if (file.name.endsWith('.json')) {
                        try {
                            const jsonData = JSON.parse(content);
                            content = JSON.stringify(jsonData, null, 2);
                        } catch (err) {
                            showError('JSON íŒŒì¼ íŒŒì‹± ì˜¤ë¥˜: ' + err.message);
                            return;
                        }
                    }
                    
                    document.getElementById('title-guidelines-text').value = content;
                    document.getElementById('title-file-name').textContent = `ì—…ë¡œë“œëœ íŒŒì¼: ${file.name}`;
                    showSuccess('ì œëª© ì§€ì¹¨ íŒŒì¼ì´ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.');
                };
                reader.readAsText(file);
            }
        }

        function loadContentGuidelinesFromFile(input) {
            const file = input.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    let content = e.target.result;
                    
                    // JSON íŒŒì¼ì¸ ê²½ìš° íŒŒì‹±
                    if (file.name.endsWith('.json')) {
                        try {
                            const jsonData = JSON.parse(content);
                            content = JSON.stringify(jsonData, null, 2);
                        } catch (err) {
                            showError('JSON íŒŒì¼ íŒŒì‹± ì˜¤ë¥˜: ' + err.message);
                            return;
                        }
                    }
                    
                    document.getElementById('content-guidelines-text').value = content;
                    document.getElementById('content-file-name').textContent = `ì—…ë¡œë“œëœ íŒŒì¼: ${file.name}`;
                    showSuccess('ë¸”ë¡œê·¸ ì§€ì¹¨ íŒŒì¼ì´ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.');
                };
                reader.readAsText(file);
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì €ì¥ëœ ì§€ì¹¨ ë¶ˆëŸ¬ì˜¤ê¸°
        function loadSavedGuidelines() {
            const titleGuidelines = localStorage.getItem('title_guidelines');
            const contentGuidelines = localStorage.getItem('content_guidelines');
            
            if (titleGuidelines) {
                document.getElementById('title-guidelines-text').value = titleGuidelines;
            }
            
            if (contentGuidelines) {
                document.getElementById('content-guidelines-text').value = contentGuidelines;
            }
        }

        function showSuccess(message) {
            // ê°„ë‹¨í•œ ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
            const successDiv = document.createElement('div');
            successDiv.className = 'success-message';
            successDiv.innerHTML = `âœ… ${message}`;
            successDiv.style.position = 'fixed';
            successDiv.style.top = '20px';
            successDiv.style.right = '20px';
            successDiv.style.zIndex = '1000';
            
            document.body.appendChild(successDiv);
            
            setTimeout(() => {
                document.body.removeChild(successDiv);
            }, 3000);
        }

        // ì €ì¥ëœ ì„¤ì • ë¡œë“œ
        function loadSettings() {
            const guidelines = localStorage.getItem('writing_guidelines');
            if (guidelines) {
                const parsed = JSON.parse(guidelines);
                Object.keys(parsed).forEach(key => {
                    const element = document.getElementById(key.replace(/([A-Z])/g, '-$1').toLowerCase());
                    if (element) {
                        element.value = parsed[key];
                    }
                });
            }
            
            // ì§€ì¹¨ ë¯¸ë¦¬ë³´ê¸° ë¡œë“œ
            loadGuidelinesPreview();
        }

        // ê¸°ë³¸ SEO ì§€ì¹¨ ë¡œë“œ
        async function loadDefaultGuidelines() {
            try {
                const response = await fetch('/seo_writing_guidelines.json');
                const guidelines = await response.json();
                
                // UIì— ê¸°ë³¸ê°’ ì ìš©
                document.getElementById('writing-style').value = 'professional_friendly';
                document.getElementById('style-description').value = guidelines.writing_style.voice_characteristics.join(', ');
                document.getElementById('target-age').value = '25-45';
                document.getElementById('target-expertise').value = 'mixed';
                document.getElementById('target-description').value = guidelines.target_audience.psychographics.interests.join(', ');
                document.getElementById('keyword-density').value = '2';
                document.getElementById('min-words').value = guidelines.seo_optimization.technical_seo.word_count.minimum;
                document.getElementById('optimal-words').value = '2500';
                document.getElementById('max-words').value = '3500';
                document.getElementById('forbidden-words').value = guidelines.restrictions_and_guidelines.forbidden_practices;
                document.getElementById('forbidden-topics').value = guidelines.restrictions_and_guidelines.content_restrictions.prohibited_topics.join(', ');
                document.getElementById('brand-name').value = 'BlogAuto Pro';
                document.getElementById('brand-voice').value = guidelines.brand_voice.core_values.join(', ');
                document.getElementById('brand-keywords').value = guidelines.brand_voice.signature_elements.join(', ');
                
                // ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸
                loadGuidelinesPreview();
                
                showSuccess('ê¸°ë³¸ SEO ìµœì í™” ì§€ì¹¨ì´ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.');
            } catch (error) {
                console.error('ì§€ì¹¨ ë¡œë“œ ì‹¤íŒ¨:', error);
                showSuccess('ê¸°ë³¸ ì§€ì¹¨ì´ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.');
            }
        }

        // ì§€ì¹¨ ë¯¸ë¦¬ë³´ê¸° ë¡œë“œ
        async function loadGuidelinesPreview() {
            try {
                const response = await fetch('/seo_writing_guidelines.json');
                const guidelines = await response.json();
                
                const preview = document.getElementById('guidelines-preview');
                preview.textContent = JSON.stringify(guidelines, null, 2);
            } catch (error) {
                document.getElementById('guidelines-preview').textContent = 'ì§€ì¹¨ íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.';
            }
        }

        // ì§€ì¹¨ ë¯¸ë¦¬ë³´ê¸° í† ê¸€
        function toggleGuidelinesPreview() {
            const preview = document.getElementById('guidelines-preview').parentElement;
            if (preview.style.maxHeight === '300px') {
                preview.style.maxHeight = 'none';
            } else {
                preview.style.maxHeight = '300px';
            }
        }

        // ì§€ì¹¨ ë‚´ë³´ë‚´ê¸°
        function exportGuidelines() {
            const guidelines = getCurrentGuidelines();
            const dataStr = JSON.stringify(guidelines, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = 'writing_guidelines.json';
            link.click();
            
            showSuccess('ì§€ì¹¨ì´ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.');
        }

        // í˜„ì¬ ì§€ì¹¨ ìˆ˜ì§‘
        function getCurrentGuidelines() {
            return {
                meta: {
                    name: "ì‚¬ìš©ì ì •ì˜ ê¸€ì“°ê¸° ì§€ì¹¨",
                    version: "1.0",
                    last_updated: new Date().toISOString().split('T')[0],
                    description: "BlogAuto Proì—ì„œ ì„¤ì •ëœ ì‚¬ìš©ì ì •ì˜ ê¸€ì“°ê¸° ê°€ì´ë“œë¼ì¸"
                },
                writing_style: {
                    primary_style: document.getElementById('writing-style').value,
                    description: document.getElementById('style-description').value
                },
                target_audience: {
                    age_range: document.getElementById('target-age').value,
                    expertise_level: document.getElementById('target-expertise').value,
                    description: document.getElementById('target-description').value
                },
                seo_optimization: {
                    keyword_density: parseFloat(document.getElementById('keyword-density').value),
                    min_words: parseInt(document.getElementById('min-words').value),
                    optimal_words: parseInt(document.getElementById('optimal-words').value),
                    max_words: parseInt(document.getElementById('max-words').value)
                },
                restrictions: {
                    forbidden_words: document.getElementById('forbidden-words').value,
                    forbidden_topics: document.getElementById('forbidden-topics').value
                },
                brand_voice: {
                    brand_name: document.getElementById('brand-name').value,
                    voice_description: document.getElementById('brand-voice').value,
                    keywords: document.getElementById('brand-keywords').value
                }
            };
        }

        // ê¸°ì¡´ ë¸”ë¡œê·¸ ì‘ì„± í•¨ìˆ˜ë“¤
        async function analyzeKeyword() {
            const keyword = document.getElementById('keyword').value.trim();
            const country = document.getElementById('country').value;
            
            if (!keyword) {
                alert('í‚¤ì›Œë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            currentKeyword = keyword;
            
            document.getElementById('loading1').classList.add('show');
            document.getElementById('keyword-results').style.display = 'none';
            
            try {
                const response = await fetch(`${API_BASE}/analyze-keywords`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ keyword, country })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    displayKeywordResults(result.data);
                    enableStep2();
                } else {
                    showError('í‚¤ì›Œë“œ ë¶„ì„ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
            } catch (error) {
                showError('ì„œë²„ ì—°ê²°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message);
                console.error('Error:', error);
            } finally {
                document.getElementById('loading1').classList.remove('show');
            }
        }

        function displayKeywordResults(data) {
            const resultsDiv = document.getElementById('keyword-results');
            
            resultsDiv.innerHTML = `
                <h3>ğŸ“Š í‚¤ì›Œë“œ ë¶„ì„ ê²°ê³¼</h3>
                <div class="keyword-analysis">
                    <div class="metric">
                        <div class="metric-value">${data.search_volume?.toLocaleString() || 'N/A'}</div>
                        <div class="metric-label">ì›”ê°„ ê²€ìƒ‰ëŸ‰</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value">${data.competition}</div>
                        <div class="metric-label">ê²½ìŸë„</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value">${data.difficulty}/100</div>
                        <div class="metric-label">SEO ë‚œì´ë„</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value">$${data.cpc}</div>
                        <div class="metric-label">í´ë¦­ë‹¹ ë¹„ìš©</div>
                    </div>
                </div>
                
                <h4>ğŸ”— ê´€ë ¨ í‚¤ì›Œë“œ</h4>
                <div class="related-keywords">
                    ${data.related_keywords?.map(kw => `<span class="keyword-tag">${kw}</span>`).join('') || ''}
                </div>
                
                <h4>ğŸ’¡ ì½˜í…ì¸  ì œì•ˆ</h4>
                <ul>
                    ${data.content_suggestions?.map(suggestion => `<li>${suggestion}</li>`).join('') || ''}
                </ul>
            `;
            
            resultsDiv.style.display = 'block';
        }

        function enableStep2() {
            document.getElementById('step2').classList.add('active');
            document.getElementById('generate-titles-btn').disabled = false;
        }

        async function generateTitles() {
            const count = parseInt(document.getElementById('title-count').value);
            const tone = document.getElementById('tone').value;
            
            // ì‚¬ìš©ì ì§€ì¹¨ ê°€ì ¸ì˜¤ê¸°
            const titleGuidelines = localStorage.getItem('title_guidelines') || '';
            
            document.getElementById('loading2').classList.add('show');
            document.getElementById('title-results').style.display = 'none';
            
            try {
                const requestBody = { 
                    keyword: currentKeyword, 
                    count, 
                    tone,
                    guidelines: titleGuidelines // ì‚¬ìš©ì ì§€ì¹¨ í¬í•¨
                };
                
                const response = await fetch(`${API_BASE}/generate-titles`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(requestBody)
                });
                
                const result = await response.json();
                
                if (result.success) {
                    displayTitleResults(result);
                } else {
                    showError('ì œëª© ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
            } catch (error) {
                showError('ì„œë²„ ì—°ê²°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message);
            } finally {
                document.getElementById('loading2').classList.remove('show');
            }
        }

        function displayTitleResults(result) {
            const resultsDiv = document.getElementById('title-results');
            
            resultsDiv.innerHTML = `
                <h3>âœ¨ ìƒì„±ëœ ì œëª©ë“¤</h3>
                <p>ì›í•˜ëŠ” ì œëª©ì„ í´ë¦­í•˜ì—¬ ì„ íƒí•˜ì„¸ìš”:</p>
                ${result.titles.map((title, index) => `
                    <div class="title-option" onclick="selectTitle('${title.title.replace(/'/g, "\\'")}', ${index})">
                        <div class="title-text">${title.title}</div>
                        <div class="title-score">SEO ì ìˆ˜: ${title.score}/100 | í´ë¦­ ì ì¬ë ¥: ${title.click_potential}</div>
                    </div>
                `).join('')}
            `;
            
            resultsDiv.style.display = 'block';
        }

        function selectTitle(title, index) {
            document.querySelectorAll('.title-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            document.querySelectorAll('.title-option')[index].classList.add('selected');
            selectedTitle = title;
            
            enableStep3();
        }

        function enableStep3() {
            document.getElementById('step3').classList.add('active');
            document.getElementById('generate-content-btn').disabled = false;
        }

        async function generateContent() {
            const length = document.getElementById('content-length').value;
            const tone = document.getElementById('tone').value;
            
            if (!selectedTitle) {
                alert('ë¨¼ì € ì œëª©ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }
            
            // ì‚¬ìš©ì ì§€ì¹¨ ê°€ì ¸ì˜¤ê¸°
            const contentGuidelines = localStorage.getItem('content_guidelines') || '';
            
            document.getElementById('loading3').classList.add('show');
            document.getElementById('content-results').style.display = 'none';
            
            try {
                const requestBody = { 
                    title: selectedTitle, 
                    keyword: currentKeyword, 
                    length, 
                    tone,
                    guidelines: contentGuidelines // ì‚¬ìš©ì ì§€ì¹¨ í¬í•¨
                };
                
                const response = await fetch(`${API_BASE}/generate-content`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(requestBody)
                });
                
                const result = await response.json();
                
                if (result.success) {
                    generatedContent = result.content;
                    displayContentResults(result);
                    enableStep4();
                } else {
                    showError('ì½˜í…ì¸  ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
            } catch (error) {
                showError('ì„œë²„ ì—°ê²°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message);
            } finally {
                document.getElementById('loading3').classList.remove('show');
            }
        }

        function displayContentResults(result) {
            const resultsDiv = document.getElementById('content-results');
            
            resultsDiv.innerHTML = `
                <h3>ğŸ“ ìƒì„±ëœ ì½˜í…ì¸ </h3>
                <div class="content-stats">
                    <span>ğŸ“Š SEO ì ìˆ˜: ${result.seo_score}/100</span>
                    <span>ğŸ“– ê°€ë…ì„±: ${result.readability_score}/100</span>
                    <span>ğŸ“ ê¸€ì ìˆ˜: ${result.word_count?.toLocaleString()}</span>
                    <span>â±ï¸ ì˜ˆìƒ ì½ê¸° ì‹œê°„: ${result.estimated_reading_time}</span>
                </div>
                <div class="content-preview">
                    ${result.content.replace(/\n/g, '<br>')}
                </div>
            `;
            
            resultsDiv.style.display = 'block';
        }

        function enableStep4() {
            document.getElementById('step4').classList.add('active');
            document.getElementById('publish-btn').disabled = false;
        }

        async function publishWordPress() {
            const siteUrl = document.getElementById('wp-site').value.trim();
            const username = document.getElementById('wp-username').value.trim();
            const password = document.getElementById('wp-password').value.trim();
            const category = document.getElementById('wp-category').value.trim();
            
            if (!siteUrl || !username || !password) {
                alert('ëª¨ë“  WordPress ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            if (!generatedContent) {
                alert('ë¨¼ì € ì½˜í…ì¸ ë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            document.getElementById('loading4').classList.add('show');
            document.getElementById('publish-results').style.display = 'none';
            
            try {
                const response = await fetch(`${API_BASE}/publish-wordpress`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        title: selectedTitle,
                        content: generatedContent,
                        category,
                        username,
                        password,
                        site_url: siteUrl
                    })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    displayPublishResults(result);
                } else {
                    showError('WordPress ë°œí–‰ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + (result.message || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'));
                }
            } catch (error) {
                showError('ì„œë²„ ì—°ê²°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message);
            } finally {
                document.getElementById('loading4').classList.remove('show');
            }
        }

        function displayPublishResults(result) {
            const resultsDiv = document.getElementById('publish-results');
            
            resultsDiv.innerHTML = `
                <div class="success-message">
                    <h3>ğŸ‰ ë°œí–‰ ì™„ë£Œ!</h3>
                    <p>${result.message}</p>
                    <p><strong>í¬ìŠ¤íŠ¸ ID:</strong> ${result.post_id}</p>
                    <p><strong>URL:</strong> <a href="${result.post_url}" target="_blank">${result.post_url}</a></p>
                    <p><strong>ë°œí–‰ ì‹œê°„:</strong> ${new Date(result.publication_time).toLocaleString()}</p>
                </div>
            `;
            
            resultsDiv.style.display = 'block';
        }

        function showError(message) {
            const errorHtml = `<div class="error-message">âŒ ${message}</div>`;
            const activeResults = document.querySelector('.results[style*="block"]');
            if (activeResults) {
                activeResults.innerHTML = errorHtml;
            } else {
                // í™œì„±í™”ëœ ë¡œë”© ì˜ì—­ ì°¾ê¸°
                const activeLoading = document.querySelector('.loading.show');
                if (activeLoading) {
                    const parentStep = activeLoading.closest('.step');
                    const resultsDiv = parentStep.querySelector('.results');
                    resultsDiv.innerHTML = errorHtml;
                    resultsDiv.style.display = 'block';
                }
            }
        }

        // ì—”í„° í‚¤ ì´ë²¤íŠ¸
        document.getElementById('keyword').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                analyzeKeyword();
            }
        });

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì„¤ì • ë¡œë“œ
        document.addEventListener('DOMContentLoaded', function() {
            loadSettings();
            loadSavedGuidelines(); // ì €ì¥ëœ ì§€ì¹¨ ë¶ˆëŸ¬ì˜¤ê¸°
        });
    </script>
</body>
</html>