<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BlogAuto Pro - AI 블로그 작성 도구</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
            display: flex;
        }

        /* 사이드바 메뉴 */
        .sidebar {
            width: 280px;
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 30px 0;
            display: flex;
            flex-direction: column;
        }

        .logo {
            text-align: center;
            margin-bottom: 40px;
            padding: 0 20px;
        }

        .logo h1 {
            font-size: 1.8em;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .logo p {
            font-size: 0.9em;
            opacity: 0.8;
        }

        .menu-item {
            padding: 15px 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
            display: flex;
            align-items: center;
        }

        .menu-item:hover {
            background: rgba(255,255,255,0.1);
            border-left-color: #3498db;
        }

        .menu-item.active {
            background: rgba(52, 152, 219, 0.2);
            border-left-color: #3498db;
        }

        .menu-item i {
            margin-right: 10px;
            width: 20px;
        }

        .settings-panel {
            margin-top: auto;
            padding: 20px;
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        /* 메인 콘텐츠 */
        .main-content {
            flex: 1;
            padding: 40px;
            overflow-y: auto;
            max-height: 100vh;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        .page-header {
            margin-bottom: 30px;
        }

        .page-title {
            font-size: 2.2em;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .page-subtitle {
            font-size: 1.1em;
            color: #7f8c8d;
        }

        /* 설정 패널 스타일 */
        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .setting-card {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 25px;
            border: 2px solid #e9ecef;
            transition: all 0.3s ease;
        }

        .setting-card:hover {
            border-color: #3498db;
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.1);
        }

        .setting-title {
            font-size: 1.2em;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .setting-title i {
            margin-right: 10px;
            color: #3498db;
        }

        .setting-description {
            color: #6c757d;
            margin-bottom: 15px;
            font-size: 0.95em;
        }

        .setting-input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            margin-bottom: 10px;
        }

        .setting-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .setting-toggle {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .toggle-switch {
            position: relative;
            width: 50px;
            height: 25px;
            background: #ccc;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .toggle-switch.active {
            background: #3498db;
        }

        .toggle-switch::after {
            content: '';
            position: absolute;
            width: 21px;
            height: 21px;
            background: white;
            border-radius: 50%;
            top: 2px;
            left: 2px;
            transition: all 0.3s ease;
        }

        .toggle-switch.active::after {
            left: 27px;
        }

        /* 기존 스타일들 */
        .step {
            margin-bottom: 40px;
            padding: 30px;
            border: 2px solid #f0f0f0;
            border-radius: 15px;
            background: #fafafa;
            transition: all 0.3s ease;
        }

        .step.active {
            border-color: #3498db;
            background: #f8fbff;
            box-shadow: 0 10px 30px rgba(52, 152, 219, 0.1);
        }

        .step-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .step-number {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2em;
            margin-right: 15px;
        }

        .step-title {
            font-size: 1.5em;
            font-weight: 600;
            color: #2c3e50;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
            font-size: 1.1em;
        }

        .input-group input, .input-group select, .input-group textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1.1em;
            transition: all 0.3s ease;
        }

        .input-group textarea {
            min-height: 120px;
            resize: vertical;
        }

        .input-group input:focus, .input-group select:focus, .input-group textarea:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-right: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(52, 152, 219, 0.3);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #95a5a6 0%, #7f8c8d 100%);
        }

        .loading {
            display: none;
            align-items: center;
            color: #3498db;
            font-weight: 600;
            margin-top: 15px;
        }

        .loading.show {
            display: flex;
        }

        .spinner {
            width: 20px;
            height: 20px;
            border: 2px solid #e0e0e0;
            border-top: 2px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .results {
            margin-top: 20px;
            padding: 20px;
            background: white;
            border-radius: 10px;
            border: 1px solid #e0e0e0;
        }

        .keyword-analysis {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .metric {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .metric-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #3498db;
        }

        .metric-label {
            font-size: 0.9em;
            color: #666;
            margin-top: 5px;
        }

        .title-option {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .title-option:hover {
            border-color: #3498db;
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.1);
        }

        .title-option.selected {
            border-color: #3498db;
            background: #f8fbff;
        }

        .title-text {
            font-size: 1.2em;
            font-weight: 600;
            margin-bottom: 10px;
            color: #2c3e50;
        }

        .title-score {
            color: #3498db;
            font-weight: bold;
        }

        .content-preview {
            background: #f8f9fa;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            max-height: 400px;
            overflow-y: auto;
        }

        .content-stats {
            display: flex;
            gap: 20px;
            margin-bottom: 15px;
            font-size: 0.9em;
            color: #666;
            flex-wrap: wrap;
        }

        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            border: 1px solid #c3e6cb;
        }

        .error-message {
            background: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            border: 1px solid #f5c6cb;
        }

        .related-keywords {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }

        .keyword-tag {
            background: #e3f2fd;
            color: #1976d2;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9em;
        }

        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-online { background: #27ae60; }
        .status-offline { background: #e74c3c; }
        .status-warning { background: #f39c12; }

        /* 지침 관리 스타일 */
        .guidelines-tabs {
            display: flex;
            gap: 10px;
            border-bottom: 2px solid #eee;
            padding-bottom: 0;
        }

        .tab-btn {
            padding: 12px 24px;
            border: none;
            background: #f8f9fa;
            color: #666;
            cursor: pointer;
            border-radius: 8px 8px 0 0;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .tab-btn.active {
            background: #007bff;
            color: white;
        }

        .tab-btn:hover:not(.active) {
            background: #e9ecef;
        }

        .guideline-content {
            animation: fadeIn 0.3s ease;
        }

        .guideline-card {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border: 1px solid #e9ecef;
        }

        .guideline-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f1f3f4;
        }

        .guideline-header h3 {
            margin: 0;
            color: #2c3e50;
            font-size: 1.4em;
        }

        .guideline-actions {
            display: flex;
            gap: 10px;
        }

        .btn-small {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .btn-small:first-child {
            background: #dc3545;
            color: white;
        }

        .btn-small:first-child:hover {
            background: #c82333;
        }

        .btn-small:last-child {
            background: #28a745;
            color: white;
        }

        .btn-small:last-child:hover {
            background: #218838;
        }

        .file-upload-section {
            margin-bottom: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 2px dashed #dee2e6;
            text-align: center;
        }

        .file-upload-btn {
            display: inline-block;
            padding: 12px 24px;
            background: #007bff;
            color: white;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .file-upload-btn:hover {
            background: #0056b3;
            transform: translateY(-1px);
        }

        .file-name {
            display: block;
            margin-top: 10px;
            font-size: 0.9em;
            color: #666;
        }

        .guideline-textarea {
            width: 100%;
            min-height: 400px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-size: 0.95em;
            line-height: 1.6;
            resize: vertical;
            background: #fefefe;
            transition: border-color 0.3s ease;
        }

        .guideline-textarea:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 3px rgba(0,123,255,0.1);
        }

        .guideline-textarea::placeholder {
            color: #999;
            font-style: italic;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 1024px) {
            .container {
                flex-direction: column;
                margin: 10px;
            }
            
            .sidebar {
                width: 100%;
                order: 2;
            }
            
            .main-content {
                padding: 20px;
                order: 1;
            }
            
            .settings-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 사이드바 메뉴 -->
        <div class="sidebar">
            <div class="logo">
                <h1>🚀 BlogAuto Pro</h1>
                <p>AI 블로그 자동화 플랫폼</p>
            </div>
            
            <div class="menu-item active" onclick="showPage('writer')">
                <i>✍️</i> 블로그 작성
            </div>
            
            <div class="menu-item" onclick="showPage('settings')">
                <i>⚙️</i> 시스템 설정
            </div>
            
            <div class="menu-item" onclick="showPage('guidelines')">
                <i>📋</i> 글쓰기 지침
            </div>
            
            <div class="menu-item" onclick="showPage('templates')">
                <i>📄</i> 템플릿 관리
            </div>
            
            <div class="menu-item" onclick="showPage('analytics')">
                <i>📊</i> 분석 & 통계
            </div>
            
            <div class="menu-item" onclick="showPage('help')">
                <i>❓</i> 도움말
            </div>
            
            <div class="settings-panel">
                <div style="font-size: 0.9em; opacity: 0.8; margin-bottom: 10px;">
                    <span class="status-indicator status-online"></span> API 서버 연결됨
                </div>
                <div style="font-size: 0.8em; opacity: 0.6;">
                    Version 1.0.0
                </div>
            </div>
        </div>

        <!-- 메인 콘텐츠 -->
        <div class="main-content">
            <!-- 블로그 작성 페이지 -->
            <div id="writer-page" class="page active">
                <div class="page-header">
                    <h1 class="page-title">AI 블로그 작성</h1>
                    <p class="page-subtitle">키워드부터 완성된 글까지 자동으로 생성하세요</p>
                </div>

                <!-- Step 1: 키워드 분석 -->
                <div class="step active" id="step1">
                    <div class="step-header">
                        <div class="step-number">1</div>
                        <div class="step-title">키워드 분석</div>
                    </div>
                    
                    <div class="input-group">
                        <label for="keyword">주제 키워드</label>
                        <input type="text" id="keyword" placeholder="예: 건강한 식단, 면역력 높이기, 투자 방법" />
                    </div>
                    
                    <div class="input-group">
                        <label for="country">타겟 국가</label>
                        <select id="country">
                            <option value="KR">한국</option>
                            <option value="US">미국</option>
                            <option value="JP">일본</option>
                        </select>
                    </div>
                    
                    <button class="btn" onclick="analyzeKeyword()">키워드 분석하기</button>
                    <div class="loading" id="loading1">
                        <div class="spinner"></div>
                        키워드를 분석하고 있습니다...
                    </div>
                    
                    <div id="keyword-results" class="results" style="display: none;"></div>
                </div>

                <!-- Step 2: 제목 생성 -->
                <div class="step" id="step2">
                    <div class="step-header">
                        <div class="step-number">2</div>
                        <div class="step-title">SEO 최적화 제목 생성</div>
                    </div>
                    
                    <div class="input-group">
                        <label for="title-count">생성할 제목 개수</label>
                        <select id="title-count">
                            <option value="3">3개</option>
                            <option value="5" selected>5개</option>
                            <option value="7">7개</option>
                            <option value="10">10개</option>
                        </select>
                    </div>
                    
                    <div class="input-group">
                        <label for="tone">글의 톤</label>
                        <select id="tone">
                            <option value="professional">전문적</option>
                            <option value="friendly">친근한</option>
                            <option value="formal">공식적</option>
                            <option value="casual">캐주얼</option>
                        </select>
                    </div>
                    
                    <button class="btn" onclick="generateTitles()" disabled id="generate-titles-btn">제목 생성하기</button>
                    <div class="loading" id="loading2">
                        <div class="spinner"></div>
                        SEO 최적화 제목을 생성하고 있습니다...
                    </div>
                    
                    <div id="title-results" class="results" style="display: none;"></div>
                </div>

                <!-- Step 3: 콘텐츠 생성 -->
                <div class="step" id="step3">
                    <div class="step-header">
                        <div class="step-number">3</div>
                        <div class="step-title">고품질 콘텐츠 생성</div>
                    </div>
                    
                    <div class="input-group">
                        <label for="content-length">글 길이</label>
                        <select id="content-length">
                            <option value="short">짧음 (800-1200자)</option>
                            <option value="medium" selected>보통 (1500-2500자)</option>
                            <option value="long">긺 (2500-4000자)</option>
                        </select>
                    </div>
                    
                    <button class="btn" onclick="generateContent()" disabled id="generate-content-btn">콘텐츠 생성하기</button>
                    <div class="loading" id="loading3">
                        <div class="spinner"></div>
                        고품질 블로그 콘텐츠를 생성하고 있습니다...
                    </div>
                    
                    <div id="content-results" class="results" style="display: none;"></div>
                </div>

                <!-- Step 4: WordPress 발행 -->
                <div class="step" id="step4">
                    <div class="step-header">
                        <div class="step-number">4</div>
                        <div class="step-title">WordPress 자동 발행</div>
                    </div>
                    
                    <div class="input-group">
                        <label for="wp-site">WordPress 사이트 URL</label>
                        <input type="text" id="wp-site" value="https://innerspell.com" placeholder="https://example.com" />
                    </div>
                    
                    <div class="input-group">
                        <label for="wp-username">사용자명</label>
                        <input type="text" id="wp-username" value="banana" placeholder="WordPress 사용자명" />
                    </div>
                    
                    <div class="input-group">
                        <label for="wp-password">Application Password</label>
                        <input type="password" id="wp-password" placeholder="WordPress Application Password" />
                    </div>
                    
                    <div class="input-group">
                        <label for="wp-category">카테고리</label>
                        <input type="text" id="wp-category" value="건강한 삶" placeholder="글 카테고리" />
                    </div>
                    
                    <button class="btn" onclick="publishWordPress()" disabled id="publish-btn">WordPress에 발행하기</button>
                    <div class="loading" id="loading4">
                        <div class="spinner"></div>
                        WordPress에 발행하고 있습니다...
                    </div>
                    
                    <div id="publish-results" class="results" style="display: none;"></div>
                </div>
            </div>

            <!-- 시스템 설정 페이지 -->
            <div id="settings-page" class="page">
                <div class="page-header">
                    <h1 class="page-title">시스템 설정</h1>
                    <p class="page-subtitle">BlogAuto의 기본 설정을 관리하세요</p>
                </div>

                <div class="settings-grid">
                    <div class="setting-card">
                        <div class="setting-title">
                            <i>🔑</i> API 키 관리
                        </div>
                        <div class="setting-description">
                            AI 서비스 연동을 위한 API 키를 설정합니다.
                        </div>
                        <input type="password" class="setting-input" id="openai-key" placeholder="OpenAI API Key" />
                        <input type="password" class="setting-input" id="gemini-key" placeholder="Google Gemini API Key" />
                        <input type="password" class="setting-input" id="grok-key" placeholder="xAI Grok API Key" />
                        <button class="btn" onclick="saveAPIKeys()">저장</button>
                    </div>

                    <div class="setting-card">
                        <div class="setting-title">
                            <i>🌍</i> 언어 & 지역 설정
                        </div>
                        <div class="setting-description">
                            기본 언어와 타겟 지역을 설정합니다.
                        </div>
                        <select class="setting-input" id="default-language">
                            <option value="ko">한국어</option>
                            <option value="en">English</option>
                            <option value="ja">日本語</option>
                        </select>
                        <select class="setting-input" id="default-country">
                            <option value="KR">대한민국</option>
                            <option value="US">미국</option>
                            <option value="JP">일본</option>
                        </select>
                    </div>

                    <div class="setting-card">
                        <div class="setting-title">
                            <i>⚡</i> 성능 설정
                        </div>
                        <div class="setting-description">
                            시스템 성능과 관련된 설정을 조정합니다.
                        </div>
                        <div class="setting-toggle">
                            <span>캐싱 활성화</span>
                            <div class="toggle-switch active" onclick="toggleSetting(this)"></div>
                        </div>
                        <div class="setting-toggle">
                            <span>압축 활성화</span>
                            <div class="toggle-switch active" onclick="toggleSetting(this)"></div>
                        </div>
                        <div class="setting-toggle">
                            <span>배치 처리</span>
                            <div class="toggle-switch" onclick="toggleSetting(this)"></div>
                        </div>
                    </div>

                    <div class="setting-card">
                        <div class="setting-title">
                            <i>🔒</i> 보안 설정
                        </div>
                        <div class="setting-description">
                            보안 관련 설정을 관리합니다.
                        </div>
                        <div class="setting-toggle">
                            <span>Rate Limiting</span>
                            <div class="toggle-switch active" onclick="toggleSetting(this)"></div>
                        </div>
                        <div class="setting-toggle">
                            <span>IP 블록킹</span>
                            <div class="toggle-switch active" onclick="toggleSetting(this)"></div>
                        </div>
                        <input type="number" class="setting-input" placeholder="최대 요청 수 (분당)" value="60" />
                    </div>
                </div>
            </div>

            <!-- 글쓰기 지침 페이지 -->
            <div id="guidelines-page" class="page">
                <div class="page-header">
                    <h1 class="page-title">글쓰기 지침 관리</h1>
                    <p class="page-subtitle">제목 생성과 블로그 작성에 사용될 지침을 직접 관리하세요</p>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 10px; margin-top: 15px; border-left: 4px solid #007bff;">
                        <strong>📝 지침 적용:</strong> 모든 콘텐츠는 아래 설정된 지침에 따라 생성됩니다
                    </div>
                </div>

                <!-- 지침 관리 탭 -->
                <div class="guidelines-tabs" style="margin-bottom: 30px;">
                    <button class="tab-btn active" onclick="switchGuidelineTab('title')">제목 생성 지침</button>
                    <button class="tab-btn" onclick="switchGuidelineTab('content')">블로그 작성 지침</button>
                </div>

                <!-- 제목 생성 지침 -->
                <div id="title-guidelines" class="guideline-content">
                    <div class="guideline-card">
                        <div class="guideline-header">
                            <h3>제목 생성 지침</h3>
                            <div class="guideline-actions">
                                <button class="btn-small" onclick="clearTitleGuidelines()">모두 지우기</button>
                                <button class="btn-small" onclick="saveTitleGuidelines()">저장</button>
                            </div>
                        </div>
                        
                        <div class="file-upload-section">
                            <label for="title-file-upload" class="file-upload-btn">
                                📁 지침 파일 업로드 (.txt, .md, .json)
                            </label>
                            <input type="file" id="title-file-upload" accept=".txt,.md,.json" onchange="loadTitleGuidelinesFromFile(this)" style="display: none;">
                            <span id="title-file-name" class="file-name"></span>
                        </div>
                        
                        <textarea id="title-guidelines-text" class="guideline-textarea" rows="15" placeholder="제목 생성에 사용할 지침을 입력하세요...

예시:
- 키워드를 제목 앞쪽에 배치
- 60자 이내로 작성
- 숫자나 액션 워드 포함
- 클릭을 유도하는 감정적 요소 추가
- SEO에 최적화된 구조
- 자연스러운 한국어 문법 준수"></textarea>
                    </div>
                </div>

                <!-- 블로그 작성 지침 -->
                <div id="content-guidelines" class="guideline-content" style="display: none;">
                    <div class="guideline-card">
                        <div class="guideline-header">
                            <h3>블로그 작성 지침</h3>
                            <div class="guideline-actions">
                                <button class="btn-small" onclick="clearContentGuidelines()">모두 지우기</button>
                                <button class="btn-small" onclick="saveContentGuidelines()">저장</button>
                            </div>
                        </div>
                        
                        <div class="file-upload-section">
                            <label for="content-file-upload" class="file-upload-btn">
                                📁 지침 파일 업로드 (.txt, .md, .json)
                            </label>
                            <input type="file" id="content-file-upload" accept=".txt,.md,.json" onchange="loadContentGuidelinesFromFile(this)" style="display: none;">
                            <span id="content-file-name" class="file-name"></span>
                        </div>
                        
                        <textarea id="content-guidelines-text" class="guideline-textarea" rows="15" placeholder="블로그 콘텐츠 작성에 사용할 지침을 입력하세요...

예시:
- 전문적이면서도 친근한 톤 사용
- 1500-3000자 적정 길이
- H2, H3 헤딩을 활용한 구조화
- 불릿 포인트로 핵심 정보 정리
- 키워드 밀도 1.5-2.5% 유지
- 실용적이고 바로 적용 가능한 정보 제공
- 자연스러운 한국어 표현
- 이모티콘 사용 금지"></textarea>
                    </div>
                </div>
            </div>

            <!-- 기타 페이지들 (간단히 구현) -->
            <div id="templates-page" class="page">
                <div class="page-header">
                    <h1 class="page-title">템플릿 관리</h1>
                    <p class="page-subtitle">자주 사용하는 글 템플릿을 관리하세요</p>
                </div>
                <div style="text-align: center; padding: 40px; color: #7f8c8d;">
                    <i style="font-size: 4em; display: block; margin-bottom: 20px;">📄</i>
                    <h3>템플릿 기능 준비 중</h3>
                    <p>곧 다양한 글 템플릿을 제공할 예정입니다.</p>
                </div>
            </div>

            <div id="analytics-page" class="page">
                <div class="page-header">
                    <h1 class="page-title">분석 & 통계</h1>
                    <p class="page-subtitle">글쓰기 성과와 트렌드를 분석하세요</p>
                </div>
                <div style="text-align: center; padding: 40px; color: #7f8c8d;">
                    <i style="font-size: 4em; display: block; margin-bottom: 20px;">📊</i>
                    <h3>분석 기능 준비 중</h3>
                    <p>키워드 성과, 조회수, 트렌드 분석 기능을 개발 중입니다.</p>
                </div>
            </div>

            <div id="help-page" class="page">
                <div class="page-header">
                    <h1 class="page-title">도움말</h1>
                    <p class="page-subtitle">BlogAuto 사용법과 FAQ</p>
                </div>
                <div style="padding: 20px;">
                    <h3>🚀 시작하기</h3>
                    <p>1. 키워드를 입력하여 분석을 시작하세요</p>
                    <p>2. 생성된 제목 중 마음에 드는 것을 선택하세요</p>
                    <p>3. 글 길이를 선택하고 콘텐츠를 생성하세요</p>
                    <p>4. WordPress에 자동으로 발행하세요</p>
                    
                    <h3 style="margin-top: 30px;">⚙️ 설정 가이드</h3>
                    <p>• API 키는 각 서비스의 공식 웹사이트에서 발급받으세요</p>
                    <p>• 글쓰기 지침을 설정하여 브랜드에 맞는 콘텐츠를 생성하세요</p>
                    <p>• 성능 설정을 조정하여 최적의 속도를 얻으세요</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        const API_BASE = 'http://localhost:8000';
        let currentKeyword = '';
        let selectedTitle = '';
        let generatedContent = '';
        let settings = {};

        // 페이지 전환
        function showPage(pageId) {
            // 모든 페이지 숨기기
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // 모든 메뉴 비활성화
            document.querySelectorAll('.menu-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // 선택된 페이지 표시
            document.getElementById(pageId + '-page').classList.add('active');
            
            // 선택된 메뉴 활성화
            event.target.closest('.menu-item').classList.add('active');
        }

        // 토글 스위치
        function toggleSetting(element) {
            element.classList.toggle('active');
        }

        // 설정 저장 함수들
        function saveAPIKeys() {
            const openaiKey = document.getElementById('openai-key').value;
            const geminiKey = document.getElementById('gemini-key').value;
            const grokKey = document.getElementById('grok-key').value;
            
            // 로컬 스토리지에 저장 (실제로는 암호화된 백엔드에 저장해야 함)
            if (openaiKey) localStorage.setItem('openai_key', openaiKey);
            if (geminiKey) localStorage.setItem('gemini_key', geminiKey);
            if (grokKey) localStorage.setItem('grok_key', grokKey);
            
            showSuccess('API 키가 저장되었습니다.');
        }

        // 지침 관리 함수들
        function switchGuidelineTab(type) {
            // 탭 버튼 활성화
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // 콘텐츠 표시/숨김
            document.getElementById('title-guidelines').style.display = type === 'title' ? 'block' : 'none';
            document.getElementById('content-guidelines').style.display = type === 'content' ? 'block' : 'none';
        }

        function clearTitleGuidelines() {
            if (confirm('제목 생성 지침을 모두 지우시겠습니까?')) {
                document.getElementById('title-guidelines-text').value = '';
                document.getElementById('title-file-name').textContent = '';
                showSuccess('제목 지침이 지워졌습니다.');
            }
        }

        function clearContentGuidelines() {
            if (confirm('블로그 작성 지침을 모두 지우시겠습니까?')) {
                document.getElementById('content-guidelines-text').value = '';
                document.getElementById('content-file-name').textContent = '';
                showSuccess('블로그 지침이 지워졌습니다.');
            }
        }

        function saveTitleGuidelines() {
            const guidelines = document.getElementById('title-guidelines-text').value;
            if (guidelines.trim()) {
                localStorage.setItem('title_guidelines', guidelines);
                showSuccess('제목 생성 지침이 저장되었습니다.');
            } else {
                showError('지침 내용을 입력해주세요.');
            }
        }

        function saveContentGuidelines() {
            const guidelines = document.getElementById('content-guidelines-text').value;
            if (guidelines.trim()) {
                localStorage.setItem('content_guidelines', guidelines);
                showSuccess('블로그 작성 지침이 저장되었습니다.');
            } else {
                showError('지침 내용을 입력해주세요.');
            }
        }

        function loadTitleGuidelinesFromFile(input) {
            const file = input.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    let content = e.target.result;
                    
                    // JSON 파일인 경우 파싱
                    if (file.name.endsWith('.json')) {
                        try {
                            const jsonData = JSON.parse(content);
                            content = JSON.stringify(jsonData, null, 2);
                        } catch (err) {
                            showError('JSON 파일 파싱 오류: ' + err.message);
                            return;
                        }
                    }
                    
                    document.getElementById('title-guidelines-text').value = content;
                    document.getElementById('title-file-name').textContent = `업로드된 파일: ${file.name}`;
                    showSuccess('제목 지침 파일이 로드되었습니다.');
                };
                reader.readAsText(file);
            }
        }

        function loadContentGuidelinesFromFile(input) {
            const file = input.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    let content = e.target.result;
                    
                    // JSON 파일인 경우 파싱
                    if (file.name.endsWith('.json')) {
                        try {
                            const jsonData = JSON.parse(content);
                            content = JSON.stringify(jsonData, null, 2);
                        } catch (err) {
                            showError('JSON 파일 파싱 오류: ' + err.message);
                            return;
                        }
                    }
                    
                    document.getElementById('content-guidelines-text').value = content;
                    document.getElementById('content-file-name').textContent = `업로드된 파일: ${file.name}`;
                    showSuccess('블로그 지침 파일이 로드되었습니다.');
                };
                reader.readAsText(file);
            }
        }

        // 페이지 로드 시 저장된 지침 불러오기
        function loadSavedGuidelines() {
            const titleGuidelines = localStorage.getItem('title_guidelines');
            const contentGuidelines = localStorage.getItem('content_guidelines');
            
            if (titleGuidelines) {
                document.getElementById('title-guidelines-text').value = titleGuidelines;
            }
            
            if (contentGuidelines) {
                document.getElementById('content-guidelines-text').value = contentGuidelines;
            }
        }

        function showSuccess(message) {
            // 간단한 성공 메시지 표시
            const successDiv = document.createElement('div');
            successDiv.className = 'success-message';
            successDiv.innerHTML = `✅ ${message}`;
            successDiv.style.position = 'fixed';
            successDiv.style.top = '20px';
            successDiv.style.right = '20px';
            successDiv.style.zIndex = '1000';
            
            document.body.appendChild(successDiv);
            
            setTimeout(() => {
                document.body.removeChild(successDiv);
            }, 3000);
        }

        // 저장된 설정 로드
        function loadSettings() {
            const guidelines = localStorage.getItem('writing_guidelines');
            if (guidelines) {
                const parsed = JSON.parse(guidelines);
                Object.keys(parsed).forEach(key => {
                    const element = document.getElementById(key.replace(/([A-Z])/g, '-$1').toLowerCase());
                    if (element) {
                        element.value = parsed[key];
                    }
                });
            }
            
            // 지침 미리보기 로드
            loadGuidelinesPreview();
        }

        // 기본 SEO 지침 로드
        async function loadDefaultGuidelines() {
            try {
                const response = await fetch('/seo_writing_guidelines.json');
                const guidelines = await response.json();
                
                // UI에 기본값 적용
                document.getElementById('writing-style').value = 'professional_friendly';
                document.getElementById('style-description').value = guidelines.writing_style.voice_characteristics.join(', ');
                document.getElementById('target-age').value = '25-45';
                document.getElementById('target-expertise').value = 'mixed';
                document.getElementById('target-description').value = guidelines.target_audience.psychographics.interests.join(', ');
                document.getElementById('keyword-density').value = '2';
                document.getElementById('min-words').value = guidelines.seo_optimization.technical_seo.word_count.minimum;
                document.getElementById('optimal-words').value = '2500';
                document.getElementById('max-words').value = '3500';
                document.getElementById('forbidden-words').value = guidelines.restrictions_and_guidelines.forbidden_practices;
                document.getElementById('forbidden-topics').value = guidelines.restrictions_and_guidelines.content_restrictions.prohibited_topics.join(', ');
                document.getElementById('brand-name').value = 'BlogAuto Pro';
                document.getElementById('brand-voice').value = guidelines.brand_voice.core_values.join(', ');
                document.getElementById('brand-keywords').value = guidelines.brand_voice.signature_elements.join(', ');
                
                // 미리보기 업데이트
                loadGuidelinesPreview();
                
                showSuccess('기본 SEO 최적화 지침이 로드되었습니다.');
            } catch (error) {
                console.error('지침 로드 실패:', error);
                showSuccess('기본 지침이 적용되었습니다.');
            }
        }

        // 지침 미리보기 로드
        async function loadGuidelinesPreview() {
            try {
                const response = await fetch('/seo_writing_guidelines.json');
                const guidelines = await response.json();
                
                const preview = document.getElementById('guidelines-preview');
                preview.textContent = JSON.stringify(guidelines, null, 2);
            } catch (error) {
                document.getElementById('guidelines-preview').textContent = '지침 파일을 불러올 수 없습니다.';
            }
        }

        // 지침 미리보기 토글
        function toggleGuidelinesPreview() {
            const preview = document.getElementById('guidelines-preview').parentElement;
            if (preview.style.maxHeight === '300px') {
                preview.style.maxHeight = 'none';
            } else {
                preview.style.maxHeight = '300px';
            }
        }

        // 지침 내보내기
        function exportGuidelines() {
            const guidelines = getCurrentGuidelines();
            const dataStr = JSON.stringify(guidelines, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = 'writing_guidelines.json';
            link.click();
            
            showSuccess('지침이 다운로드되었습니다.');
        }

        // 현재 지침 수집
        function getCurrentGuidelines() {
            return {
                meta: {
                    name: "사용자 정의 글쓰기 지침",
                    version: "1.0",
                    last_updated: new Date().toISOString().split('T')[0],
                    description: "BlogAuto Pro에서 설정된 사용자 정의 글쓰기 가이드라인"
                },
                writing_style: {
                    primary_style: document.getElementById('writing-style').value,
                    description: document.getElementById('style-description').value
                },
                target_audience: {
                    age_range: document.getElementById('target-age').value,
                    expertise_level: document.getElementById('target-expertise').value,
                    description: document.getElementById('target-description').value
                },
                seo_optimization: {
                    keyword_density: parseFloat(document.getElementById('keyword-density').value),
                    min_words: parseInt(document.getElementById('min-words').value),
                    optimal_words: parseInt(document.getElementById('optimal-words').value),
                    max_words: parseInt(document.getElementById('max-words').value)
                },
                restrictions: {
                    forbidden_words: document.getElementById('forbidden-words').value,
                    forbidden_topics: document.getElementById('forbidden-topics').value
                },
                brand_voice: {
                    brand_name: document.getElementById('brand-name').value,
                    voice_description: document.getElementById('brand-voice').value,
                    keywords: document.getElementById('brand-keywords').value
                }
            };
        }

        // 기존 블로그 작성 함수들
        async function analyzeKeyword() {
            const keyword = document.getElementById('keyword').value.trim();
            const country = document.getElementById('country').value;
            
            if (!keyword) {
                alert('키워드를 입력해주세요.');
                return;
            }
            
            currentKeyword = keyword;
            
            document.getElementById('loading1').classList.add('show');
            document.getElementById('keyword-results').style.display = 'none';
            
            try {
                const response = await fetch(`${API_BASE}/analyze-keywords`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ keyword, country })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    displayKeywordResults(result.data);
                    enableStep2();
                } else {
                    showError('키워드 분석에 실패했습니다.');
                }
            } catch (error) {
                showError('서버 연결에 실패했습니다: ' + error.message);
                console.error('Error:', error);
            } finally {
                document.getElementById('loading1').classList.remove('show');
            }
        }

        function displayKeywordResults(data) {
            const resultsDiv = document.getElementById('keyword-results');
            
            resultsDiv.innerHTML = `
                <h3>📊 키워드 분석 결과</h3>
                <div class="keyword-analysis">
                    <div class="metric">
                        <div class="metric-value">${data.search_volume?.toLocaleString() || 'N/A'}</div>
                        <div class="metric-label">월간 검색량</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value">${data.competition}</div>
                        <div class="metric-label">경쟁도</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value">${data.difficulty}/100</div>
                        <div class="metric-label">SEO 난이도</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value">$${data.cpc}</div>
                        <div class="metric-label">클릭당 비용</div>
                    </div>
                </div>
                
                <h4>🔗 관련 키워드</h4>
                <div class="related-keywords">
                    ${data.related_keywords?.map(kw => `<span class="keyword-tag">${kw}</span>`).join('') || ''}
                </div>
                
                <h4>💡 콘텐츠 제안</h4>
                <ul>
                    ${data.content_suggestions?.map(suggestion => `<li>${suggestion}</li>`).join('') || ''}
                </ul>
            `;
            
            resultsDiv.style.display = 'block';
        }

        function enableStep2() {
            document.getElementById('step2').classList.add('active');
            document.getElementById('generate-titles-btn').disabled = false;
        }

        async function generateTitles() {
            const count = parseInt(document.getElementById('title-count').value);
            const tone = document.getElementById('tone').value;
            
            // 사용자 지침 가져오기
            const titleGuidelines = localStorage.getItem('title_guidelines') || '';
            
            document.getElementById('loading2').classList.add('show');
            document.getElementById('title-results').style.display = 'none';
            
            try {
                const requestBody = { 
                    keyword: currentKeyword, 
                    count, 
                    tone,
                    guidelines: titleGuidelines // 사용자 지침 포함
                };
                
                const response = await fetch(`${API_BASE}/generate-titles`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(requestBody)
                });
                
                const result = await response.json();
                
                if (result.success) {
                    displayTitleResults(result);
                } else {
                    showError('제목 생성에 실패했습니다.');
                }
            } catch (error) {
                showError('서버 연결에 실패했습니다: ' + error.message);
            } finally {
                document.getElementById('loading2').classList.remove('show');
            }
        }

        function displayTitleResults(result) {
            const resultsDiv = document.getElementById('title-results');
            
            resultsDiv.innerHTML = `
                <h3>✨ 생성된 제목들</h3>
                <p>원하는 제목을 클릭하여 선택하세요:</p>
                ${result.titles.map((title, index) => `
                    <div class="title-option" onclick="selectTitle('${title.title.replace(/'/g, "\\'")}', ${index})">
                        <div class="title-text">${title.title}</div>
                        <div class="title-score">SEO 점수: ${title.score}/100 | 클릭 잠재력: ${title.click_potential}</div>
                    </div>
                `).join('')}
            `;
            
            resultsDiv.style.display = 'block';
        }

        function selectTitle(title, index) {
            document.querySelectorAll('.title-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            document.querySelectorAll('.title-option')[index].classList.add('selected');
            selectedTitle = title;
            
            enableStep3();
        }

        function enableStep3() {
            document.getElementById('step3').classList.add('active');
            document.getElementById('generate-content-btn').disabled = false;
        }

        async function generateContent() {
            const length = document.getElementById('content-length').value;
            const tone = document.getElementById('tone').value;
            
            if (!selectedTitle) {
                alert('먼저 제목을 선택해주세요.');
                return;
            }
            
            // 사용자 지침 가져오기
            const contentGuidelines = localStorage.getItem('content_guidelines') || '';
            
            document.getElementById('loading3').classList.add('show');
            document.getElementById('content-results').style.display = 'none';
            
            try {
                const requestBody = { 
                    title: selectedTitle, 
                    keyword: currentKeyword, 
                    length, 
                    tone,
                    guidelines: contentGuidelines // 사용자 지침 포함
                };
                
                const response = await fetch(`${API_BASE}/generate-content`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(requestBody)
                });
                
                const result = await response.json();
                
                if (result.success) {
                    generatedContent = result.content;
                    displayContentResults(result);
                    enableStep4();
                } else {
                    showError('콘텐츠 생성에 실패했습니다.');
                }
            } catch (error) {
                showError('서버 연결에 실패했습니다: ' + error.message);
            } finally {
                document.getElementById('loading3').classList.remove('show');
            }
        }

        function displayContentResults(result) {
            const resultsDiv = document.getElementById('content-results');
            
            resultsDiv.innerHTML = `
                <h3>📝 생성된 콘텐츠</h3>
                <div class="content-stats">
                    <span>📊 SEO 점수: ${result.seo_score}/100</span>
                    <span>📖 가독성: ${result.readability_score}/100</span>
                    <span>📏 글자 수: ${result.word_count?.toLocaleString()}</span>
                    <span>⏱️ 예상 읽기 시간: ${result.estimated_reading_time}</span>
                </div>
                <div class="content-preview">
                    ${result.content.replace(/\n/g, '<br>')}
                </div>
            `;
            
            resultsDiv.style.display = 'block';
        }

        function enableStep4() {
            document.getElementById('step4').classList.add('active');
            document.getElementById('publish-btn').disabled = false;
        }

        async function publishWordPress() {
            const siteUrl = document.getElementById('wp-site').value.trim();
            const username = document.getElementById('wp-username').value.trim();
            const password = document.getElementById('wp-password').value.trim();
            const category = document.getElementById('wp-category').value.trim();
            
            if (!siteUrl || !username || !password) {
                alert('모든 WordPress 정보를 입력해주세요.');
                return;
            }
            
            if (!generatedContent) {
                alert('먼저 콘텐츠를 생성해주세요.');
                return;
            }
            
            document.getElementById('loading4').classList.add('show');
            document.getElementById('publish-results').style.display = 'none';
            
            try {
                const response = await fetch(`${API_BASE}/publish-wordpress`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        title: selectedTitle,
                        content: generatedContent,
                        category,
                        username,
                        password,
                        site_url: siteUrl
                    })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    displayPublishResults(result);
                } else {
                    showError('WordPress 발행에 실패했습니다: ' + (result.message || '알 수 없는 오류'));
                }
            } catch (error) {
                showError('서버 연결에 실패했습니다: ' + error.message);
            } finally {
                document.getElementById('loading4').classList.remove('show');
            }
        }

        function displayPublishResults(result) {
            const resultsDiv = document.getElementById('publish-results');
            
            resultsDiv.innerHTML = `
                <div class="success-message">
                    <h3>🎉 발행 완료!</h3>
                    <p>${result.message}</p>
                    <p><strong>포스트 ID:</strong> ${result.post_id}</p>
                    <p><strong>URL:</strong> <a href="${result.post_url}" target="_blank">${result.post_url}</a></p>
                    <p><strong>발행 시간:</strong> ${new Date(result.publication_time).toLocaleString()}</p>
                </div>
            `;
            
            resultsDiv.style.display = 'block';
        }

        function showError(message) {
            const errorHtml = `<div class="error-message">❌ ${message}</div>`;
            const activeResults = document.querySelector('.results[style*="block"]');
            if (activeResults) {
                activeResults.innerHTML = errorHtml;
            } else {
                // 활성화된 로딩 영역 찾기
                const activeLoading = document.querySelector('.loading.show');
                if (activeLoading) {
                    const parentStep = activeLoading.closest('.step');
                    const resultsDiv = parentStep.querySelector('.results');
                    resultsDiv.innerHTML = errorHtml;
                    resultsDiv.style.display = 'block';
                }
            }
        }

        // 엔터 키 이벤트
        document.getElementById('keyword').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                analyzeKeyword();
            }
        });

        // 페이지 로드 시 설정 로드
        document.addEventListener('DOMContentLoaded', function() {
            loadSettings();
            loadSavedGuidelines(); // 저장된 지침 불러오기
        });
    </script>
</body>
</html>